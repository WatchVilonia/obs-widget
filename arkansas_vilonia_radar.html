<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Arkansas & Vilonia Weather Radar Animation</title>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            height: 100%;
        }
        #map {
            width: 100%;
            height: 100%;
        }
        /* Optional: Hide RainViewer's UI controls if desired */
        .leaflet-control-container .leaflet-control-rainviewer {
            display: none;
        }
    </style>
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <!-- RainViewer CSS -->
    <link rel="stylesheet" href="https://api.rainviewer.com/css/rainviewer-leaflet.css" />
</head>
<body>
    <div id="map"></div>

    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <!-- RainViewer JS -->
    <script src="https://api.rainviewer.com/js/rainviewer-leaflet.js"></script>

    <script>
        // Initialize the map
        var map = L.map('map').setView([35.0834, -92.2071], 8);

        // Base map layer from OpenStreetMap
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            maxZoom: 12,
            attribution: 'Â© OpenStreetMap contributors'
        }).addTo(map);

        // Initialize RainViewer radar animation
        var rainviewer = new RainViewer(map, {
            // Optional settings
            opacity: 0.6,
            position: 'bottomright',
            animationSpeed: 500,
            // Show the radar for the past 1 hour (returns 6 frames)
            framesCount: 6,
            // Update radar images every 10 minutes
            updateInterval: 600000,
            // Show radar images in the past (set to false for forecast)
            onlyPast: true,
            // Auto-play the animation when the map loads
            playOnInit: true,
            // Show or hide the time label
            showTimeLabel: true,
            // Add your own RainViewer API key if you have one
            apiKey: ''
        });

        // Function to switch between Arkansas and Vilonia views
        function switchRadarView() {
            var currentCenter = map.getCenter();
            if (currentCenter.lat === 35.0834 && currentCenter.lng === -92.2071) {
                map.setView([35.0834, -92.1301], 11); // Vilonia view
            } else {
                map.setView([35.0834, -92.2071], 8); // Arkansas view
            }
        }

        // Cycle radar view every 30 seconds
        setInterval(switchRadarView, 30000);
    </script>
</body>
</html>
